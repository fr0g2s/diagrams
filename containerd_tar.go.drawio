<mxfile host="app.diagrams.net" modified="2020-12-11T18:30:23.953Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36" etag="3iKEKhGR7GvBCOunoXUv" version="14.0.1" type="github" pages="4">
  <diagram id="q8Wm38Z5nJ08836b1RSZ" name="tar.go">
    <mxGraphModel dx="1422" dy="772" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="_bSDtMOKy1lk1E0QEPcb-1" value="hdr.Name = filepath.Clean(hdr.Name)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="192.5" y="560" width="227.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_bSDtMOKy1lk1E0QEPcb-3" value="func applyNative( .. , r io.Reader, ...)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="170" y="420" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_bSDtMOKy1lk1E0QEPcb-4" value="func Apply (..., root string, ...)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="140" y="120" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_bSDtMOKy1lk1E0QEPcb-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="_bSDtMOKy1lk1E0QEPcb-5" target="_bSDtMOKy1lk1E0QEPcb-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="_bSDtMOKy1lk1E0QEPcb-5" value="options.applyFunc = applyNative&lt;br&gt;options.applyFunc()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="180" y="230" width="230" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_bSDtMOKy1lk1E0QEPcb-8" value="tr = tar.NewReader(r)&lt;br&gt;hdr = tr.Next()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="192.5" y="510" width="227.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="z_nyB8k2dAdbXXsFdixh-1" value="archive/tar.go" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" width="410" height="50" as="geometry" />
        </mxCell>
        <mxCell id="z_nyB8k2dAdbXXsFdixh-2" value="options Applyoptions" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="550" y="140" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="z_nyB8k2dAdbXXsFdixh-3" value="Filter" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="570" y="190" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="z_nyB8k2dAdbXXsFdixh-4" value="ConvertWhiteout" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="570" y="240" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="z_nyB8k2dAdbXXsFdixh-5" value="Parents []string" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="570" y="290" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="z_nyB8k2dAdbXXsFdixh-6" value="applyFunc func() (int64, error)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="570" y="340" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="z_nyB8k2dAdbXXsFdixh-11" value="root = filepath.Clean(root)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="180" y="170" width="230" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="IQukHH1hN9zJcX2Q98aO" name="apply_linux.go">
    <mxGraphModel dx="1422" dy="772" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="m_NCv3AUZUCYM2IN1j1R-0" />
        <mxCell id="m_NCv3AUZUCYM2IN1j1R-1" parent="m_NCv3AUZUCYM2IN1j1R-0" />
        <mxCell id="uhv-LjCSqNqx6Fx7iKiW-0" value="apply/apply_linux.go" style="rounded=0;whiteSpace=wrap;html=1;" parent="m_NCv3AUZUCYM2IN1j1R-1" vertex="1">
          <mxGeometry x="40" width="420" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_7lM_m4DWKG-Hxm1dfck-0" value="func apply (ctx context.Context, mounts []mount.Mount, r io.Reader) error" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="m_NCv3AUZUCYM2IN1j1R-1" vertex="1">
          <mxGeometry x="110" y="120" width="470" height="40" as="geometry" />
        </mxCell>
        <mxCell id="2ipQjjCSmkYjPF60mfzb-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="m_NCv3AUZUCYM2IN1j1R-1" source="z4hKFqblzmSlzdHXwRvq-0" target="2ipQjjCSmkYjPF60mfzb-0">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="z4hKFqblzmSlzdHXwRvq-0" value="_, err = archive.Apply(ctx, path, r, opts, ...)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="m_NCv3AUZUCYM2IN1j1R-1" vertex="1">
          <mxGeometry x="160" y="290" width="320" height="50" as="geometry" />
        </mxCell>
        <mxCell id="z4hKFqblzmSlzdHXwRvq-1" value="mountfs == &#39;overlay&#39;:" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="m_NCv3AUZUCYM2IN1j1R-1" vertex="1">
          <mxGeometry x="140" y="180" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sdSCQakdLANjJBLWaq6H-0" value="path, parents, err := getOverlayPath(mounts[0].Options)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="m_NCv3AUZUCYM2IN1j1R-1" vertex="1">
          <mxGeometry x="160" y="230" width="320" height="50" as="geometry" />
        </mxCell>
        <mxCell id="2ipQjjCSmkYjPF60mfzb-0" value="archive/tar.go" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="m_NCv3AUZUCYM2IN1j1R-1">
          <mxGeometry x="140" y="440" width="360" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="5b7DhhIIVC-AHrCUUbvo" name="install.go">
    <mxGraphModel dx="813" dy="441" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="MbTv1jtkUSPSvY-0crSb-0" />
        <mxCell id="MbTv1jtkUSPSvY-0crSb-1" parent="MbTv1jtkUSPSvY-0crSb-0" />
        <mxCell id="F2P1vUBVLAmaPTKG8rs8-0" value="install.go" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="MbTv1jtkUSPSvY-0crSb-1">
          <mxGeometry x="40" width="420" height="50" as="geometry" />
        </mxCell>
        <mxCell id="snINUjOmN-LYxcYDIxXl-0" value="func (c *Client) Install (ctx, context.Context, image Image, opts ...InstallOpts) error" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="MbTv1jtkUSPSvY-0crSb-1">
          <mxGeometry x="110" y="120" width="470" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9lPZ16AJE13zATc5yVJj-0" value="if _, err := archive.Apply(ctx, path, r, archive.WithFilter(func(hdr *tar.Header) (bool, error)&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="MbTv1jtkUSPSvY-0crSb-1">
          <mxGeometry x="150" y="190" width="549" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Vhmo3F177NH2eV5xVdk7" name="commands/install/install.go">
    <mxGraphModel dx="981" dy="532" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="CVRT4O5OvF-iJVDILgVK-0" />
        <mxCell id="CVRT4O5OvF-iJVDILgVK-1" parent="CVRT4O5OvF-iJVDILgVK-0" />
        <mxCell id="hg1eTxUmxu6qxnDlDIB8-0" value="cmd/ctr/commands/install/install.go" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="CVRT4O5OvF-iJVDILgVK-1">
          <mxGeometry x="40" width="420" height="50" as="geometry" />
        </mxCell>
        <mxCell id="254Vye0xk7HScYkvVft8-0" value="return client.Install(ctx, image, opts...)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="CVRT4O5OvF-iJVDILgVK-1">
          <mxGeometry x="200" y="470" width="340" height="50" as="geometry" />
        </mxCell>
        <mxCell id="OV3WVhuhIm1XqfnxtKSq-0" value="func (c *Client) Install (ctx, context.Context, image Image, opts ...InstallOpts) error" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="CVRT4O5OvF-iJVDILgVK-1">
          <mxGeometry x="110" y="120" width="470" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OV3WVhuhIm1XqfnxtKSq-1" value="Action: func(context *cli.Context) error" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="CVRT4O5OvF-iJVDILgVK-1">
          <mxGeometry x="150" y="200" width="340" height="50" as="geometry" />
        </mxCell>
        <mxCell id="OV3WVhuhIm1XqfnxtKSq-2" value="client, ctx, cancel, err := commands.NewClient(context)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="CVRT4O5OvF-iJVDILgVK-1">
          <mxGeometry x="200" y="270" width="340" height="50" as="geometry" />
        </mxCell>
        <mxCell id="OV3WVhuhIm1XqfnxtKSq-3" value="image, err := client.GetImage(ctx, ref)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="CVRT4O5OvF-iJVDILgVK-1">
          <mxGeometry x="200" y="390" width="340" height="50" as="geometry" />
        </mxCell>
        <mxCell id="OV3WVhuhIm1XqfnxtKSq-4" value="ref := context.Args().First()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="CVRT4O5OvF-iJVDILgVK-1">
          <mxGeometry x="200" y="330" width="340" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
